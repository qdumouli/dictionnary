from collections import OrderedDict
import re
import io

def readIndex():
	orderedIndex = OrderedDict()

	with open("./index/index.txt", 'r') as index:
		for line in index:
			if not line == '':
				postingSplit = line.split(":")
				wordRegex = re.compile('[0-9a-z]+')
				if wordRegex.match(postingSplit[1]):
					term = postingSplit[0] + ':' + postingSplit[1]
					postingsList = eval(postingSplit[2])
					orderedIndex.update({term: postingsList})
				# elif postingSplit[1] == '[56, 131, 144, 147, 173, 227, 257, 264, 299, 305, 309, 327, 334, 344, 374, 377, 381, 389, 454, 462, 480, 591, 716, 769, 771, 777, 820, 874, 903, 914, 917, 922, 979, 989, 1027, 1060, 1179, 1185, 1244, 1300, 1312, 1332, 1350, 1367, 1395, 1419, 1575, 1578, 1603, 1634, 1657, 1796, 1807, 1825, 1892, 1902, 1906, 1918, 1958, 2008, 2121, 2160, 2161, 2163, 2194, 2221, 2287, 2321, 2324, 2382, 2390, 2404, 2411, 2456, 2482, 2505, 2533, 2580, 2614, 2631, 2661, 2718, 2763, 2788, 2881, 2925, 2964, 2967, 2978, 3004, 3023, 3062, 3068, 3078, 3187, 3265, 3278, 3310, 3344, 3414, 3458, 3493, 3502, 3535, 3552, 3582, 3585, 3603, 3670, 3693, 3728, 3765, 3789, 3807, 3808, 3817, 3923, 3936, 3944, 3988, 4005, 4016, 4037, 4070, 4098, 4126, 4138, 4156, 4166, 4233, 4267, 4269, 4297, 4374, 4422, 4440, 4441, 4452, 4478, 4495, 4546, 4551, 4594, 4596, 4643, 4651, 4664, 4674, 4689, 4714, 4718, 4806, 4849, 4853, 4858, 4878, 4900, 4907, 4939, 4948, 4988, 5006, 5007, 5026, 5041, 5106, 5123, 5125, 5161, 5167, 5180, 5202, 5203, 5247, 5273, 5278, 5281, 5325, 5405, 5412, 5440, 5479, 5514, 5578, 5662, 5729, 5765, 5813, 5896, 5962, 5991, 6094, 6122, 6143, 6156, 6165, 6215, 6224, 6287, 6290, 6292, 6312, 6334, 6357, 6396, 6400, 6406, 6438, 6454, 6469, 6490, 6531, 6538, 6541, 6618, 6626, 6629, 6646, 6684, 6700, 6709, 6733, 6818, 6869, 6968, 6980, 7011, 7022, 7103, 7134, 7145, 7148, 7162, 7175, 7217, 7227, 7235, 7258, 7277, 7292, 7323, 7409, 7536, 7545, 7579, 7586, 7600, 7617, 7630, 7715, 7755, 7777, 7834, 7904, 7937, 7959, 7998, 8024, 8065, 8067, 8068, 8080, 8095, 8102, 8114, 8128, 8151, 8159, 8164, 8179, 8198, 8282, 8292, 8295, 8306, 8310, 8320, 8322, 8362, 8373, 8415, 8416, 8423, 8468, 8485, 8494, 8523, 8563, 8569, 8597, 8649, 8680, 8689, 8739, 8748, 8752, 8768, 8770, 8784, 8796, 8819, 8846, 8853, 8863, 8866, 8901, 8908, 8913, 8917, 8933, 8938, 8951, 8960, 8980, 8990, 9014, 9056, 9057, 9072, 9074, 9117, 9124, 9158, 9184, 9275, 9310, 9332, 9336, 9374, 9418, 9446, 9454, 9466, 9538, 9588, 9596, 9612, 9666, 9667, 9671, 9751, 9764, 9833, 9841, 9861, 9875, 9886, 9891, 9897, 9927, 9945, 9959, 9975, 10012, 10024, 10074, 10076, 10103, 10120, 10130, 10159, 10163, 10210, 10222, 10265, 10280, 10282, 10330, 10352, 10367, 10460, 10468, 10470, 10481, 10482, 10519, 10537, 10542, 10544, 10565, 10593, 10605, 10607, 10609, 10664, 10668, 10680, 10687, 10705, 10706, 10709, 10716, 10730, 10748, 10760, 10785, 10805, 10810, 10830, 10863, 10938, 10976, 11015, 11026, 11083, 11089, 11121, 11149, 11166, 11175, 11180, 11223, 11327, 11343, 11406, 11415, 11428, 11451, 11548, 11639, 11645, 11649, 11677, 11734, 11746, 11797, 11869, 11968, 12004, 12036, 12055, 12064, 12114, 12119, 12180, 12208, 12232, 12284, 12304, 12337, 12361, 12370, 12416, 12443, 12444, 12462, 12465, 12490, 12580, 12620, 12638, 12643, 12646, 12655, 12670, 12726, 12744, 12746, 12756, 12783, 12802, 12818, 12833, 12838, 12883, 12902, 12903, 12909, 12941, 12955, 12956, 12962, 12971, 13005, 13089, 13097, 13132, 13168, 13173, 13174, 13179, 13244, 13260, 13263, 13264, 13269, 13271, 13276, 13277, 13281, 13290, 13316, 13331, 13390, 13396, 13399, 13406, 13417, 13422, 13434, 13462, 13501, 13517, 13534, 13559, 13561, 13564, 13627, 13653, 13657, 13689, 13738, 13759, 13787, 13809, 13843, 13861, 13865, 13877, 13878, 13904, 13926, 13993, 14030, 14045, 14088, 14126, 14146, 14168, 14220, 14230, 14303, 14316, 14358, 14372, 14402, 14403, 14419, 14427, 14440, 14462, 14481, 14491, 14537, 14550, 14599, 14603, 14614, 14642, 14680, 14699, 14702, 14716, 14722, 14767, 14797, 14799, 14802, 14813, 14844, 14886, 14888, 14891, 14893, 14900, 14906, 14921, 14922, 14944, 14953, 14972, 15012, 15041, 15077, 15097, 15114, 15118, 15121, 15122, 15129, 15190, 15197, 15211, 15219, 15254, 15291, 15299, 15300, 15349, 15357, 15373, 15390, 15457, 15463, 15466, 15470, 15474, 15500, 15520, 15549, 15556, 15571, 15572, 15591, 15614, 15624, 15637, 15644, 15681, 15688, 15718, 15720, 15738, 15751, 15760, 15774, 15776, 15792, 15795, 15801, 15813, 15815, 15835, 15864, 15875, 15897, 15911, 15915, 15933, 15934, 15959, 15967, 16003, 16017, 16019, 16020, 16085, 16114, 16116, 16119, 16138, 16151, 16157, 16177, 16179, 16185, 16193, 16198, 16216, 16262, 16278, 16279, 16327, 16332, 16362, 16363, 16377, 16389, 16390, 16433, 16436, 16437, 16454, 16488, 16494, 16518, 16521, 16526, 16611, 16612, 16613, 16681, 16701, 16726, 16732, 16741, 16768, 16778, 16786, 16792, 16830, 16834, 16835, 16839, 16853, 16881, 16910, 16938, 16948, 16955, 16958, 16987, 17021, 17040, 17043, 17057, 17070, 17091, 17105, 17113, 17120, 17132, 17137, 17148, 17167, 17174, 17176, 17179, 17205, 17212, 17216, 17222, 17234, 17241, 17245, 17254, 17256, 17258, 17262, 17264, 17274, 17277, 17281, 17283, 17289, 17295, 17299, 17305, 17323, 17341, 173':
				# 	continue
				else:
					term = postingSplit[0]
					postingsList = eval(postingSplit[1])
					orderedIndex.update({term: postingsList})

	return orderedIndex
